"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{1197:(e,r,t)=>{t.d(r,{cn:()=>s});var a=t(2821),i=t(75889);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.QP)((0,a.$)(r))}},3998:(e,r,t)=>{t.d(r,{$:()=>l});var a=t(95155);t(12115);var i=t(46673),s=t(83101),n=t(1197);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:s,asChild:l=!1,...d}=e,c=l?i.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,n.cn)(o({variant:t,size:s,className:r})),...d})}},18969:(e,r,t)=>{t.d(r,{P:()=>j});var a=t(95155),i=t(12115),s=t(3998),n=t(86948),o=t(65142),l=t(76444),d=t(90368),c=t(27937),m=t(1197);function u(e){let{className:r,mode:t="single",selected:n,onSelect:o,disabled:l,...u}=e,[x,b]=i.useState(new Date),g=(e=>{let r=e.getFullYear(),t=e.getMonth(),a=new Date(r,t,1),i=new Date(r,t+1,0).getDate(),s=a.getDay(),n=[];for(let e=0;e<s;e++)n.push(null);for(let e=1;e<=i;e++)n.push(new Date(r,t,e));return n})(x),h=x.toLocaleDateString("en-US",{month:"long",year:"numeric"});return(0,a.jsx)("div",{className:(0,m.cn)("p-3 border rounded-md",r),...u,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"font-semibold text-sm",children:h}),(0,a.jsxs)("div",{className:"space-x-1",children:[(0,a.jsx)(s.$,{variant:"outline",className:"h-7 w-7 p-0",onClick:()=>{b(new Date(x.getFullYear(),x.getMonth()-1))},children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}),(0,a.jsx)(s.$,{variant:"outline",className:"h-7 w-7 p-0",onClick:()=>{b(new Date(x.getFullYear(),x.getMonth()+1))},children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-semibold py-2",children:e.slice(0,1)},e)),g.map((e,r)=>(0,a.jsx)("button",{onClick:()=>e&&void((null==l||!l(e))&&(null==o||o(e))),disabled:!e||e&&(null==l?void 0:l(e)),className:(0,m.cn)("h-8 w-8 text-sm rounded-md hover:bg-primary/10 transition-colors",!e&&"invisible",e&&(null==l?void 0:l(e))&&"opacity-50 cursor-not-allowed",!!n&&!!e&&e.toDateString()===n.toDateString()&&"bg-primary text-primary-foreground"),children:null==e?void 0:e.getDate()},r))]})]})})}var x=t(5917),b=t(89559),g=t(88557),h=t(20063),p=t(99708);function v(){let e=(0,h.useRouter)(),r=(0,i.useRef)(0),t=(0,i.useRef)(null);return(0,a.jsx)("button",{onClick:()=>{r.current+=1,t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{r.current=0},2e3),3===r.current&&(e.push("/admin/login"),r.current=0)},className:"fixed bottom-6 left-6 p-3 text-amber-600 hover:text-amber-700 transition-colors opacity-70 hover:opacity-100 z-40",title:"Triple-click for admin access","aria-label":"Secret admin button",children:(0,a.jsx)(p.A,{className:"h-6 w-6"})})}let f=e=>{let r=6e4*e.getTimezoneOffset();return new Date(e.getTime()-r).toISOString().split("T")[0]};function j(){var e,r;let{t,language:m}=(0,g.s)(),[h,p]=(0,i.useState)(1),[j,y]=(0,i.useState)(!1),[k,N]=(0,i.useState)(null),[w,S]=(0,i.useState)([]),[C,D]=(0,i.useState)(null),[T,A]=(0,i.useState)({service:"",date:void 0,time:"",name:"",email:"",phone:"",notes:""}),F=[{id:"Haircut",nameKey:"services.haircut",price:"25€",duration:"45 min"},{id:"Beard Trim",nameKey:"services.beard_trim",price:"15€",duration:"30 min"},{id:"Hair & Beard",nameKey:"services.hair_and_beard",price:"35€",duration:"75 min"},{id:"Styling",nameKey:"services.styling",price:"20€",duration:"15 min"},{id:"Hair Wash",nameKey:"services.hairwash",price:"10€",duration:"15 min"},{id:"Combo",nameKey:"services.combo",price:"50€",duration:"90 min"}];(0,i.useEffect)(()=>{if(!T.date)return;let e=async()=>{let e=T.date?f(T.date):void 0;try{let r=await fetch("/api/bookings/availability?date=".concat(e));if(r.ok){let e=await r.json();S(e.bookedTimes||[])}}catch(e){console.error("Failed to refresh availability:",e)}};e();let r=setInterval(e,1e4);return()=>clearInterval(r)},[T.date]);let K=async e=>{if(A({...T,date:e,time:""}),e){let r=f(e);try{let e=await fetch("/api/bookings/availability?date=".concat(r));if(e.ok){let r=await e.json();S(r.bookedTimes||[])}}catch(e){console.error("Failed to fetch availability:",e)}}},E=async()=>{y(!0),N(null);try{let e=T.date?f(T.date):void 0,r=await fetch("/api/bookings/reserve-slot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,time:T.time})});if(!r.ok){let t=await r.json();N(t.error||"Slot unavailable. Please select another time.");let a=await fetch("/api/bookings/availability?date=".concat(e));if(a.ok){let e=await a.json();S(e.bookedTimes||[])}return}let t=await r.json();D(t.reservedSlot.id);let a=await fetch("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:T.service,date:e,time:T.time,name:T.name,email:T.email,phone:T.phone,language:m,notes:T.notes})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to submit booking")}let i=await a.json();console.log("Booking submitted successfully:",i),p(4)}catch(r){let e=r instanceof Error?r.message:"An error occurred";N(e),console.error("Booking error:",e)}finally{y(!1)}},P=()=>{switch(h){case 1:return!!T.service;case 2:return!!T.date&&!!T.time;case 3:return!!T.name&&!!T.email&&!!T.phone;default:return!1}},z=[{number:1,titleKey:"booking.step1"},{number:2,titleKey:"booking.step2"},{number:3,titleKey:"booking.step3"},{number:4,titleKey:"booking.step4"}];return(0,a.jsxs)("div",{className:"bg-background",children:[(0,a.jsxs)("div",{className:"max-w-full mx-auto grid grid-cols-1 lg:grid-cols-3 gap-0",style:{minHeight:"100vh"},children:[(0,a.jsx)("div",{className:"flex items-center justify-center lg:col-span-1",style:{minHeight:"300px"},children:(0,a.jsx)("div",{className:"w-full rounded-lg overflow-hidden shadow-2xl",style:{backgroundImage:"url(/back1.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",height:"100%",minHeight:"inherit"}})}),(0,a.jsxs)("div",{className:"lg:col-span-2 py-8 px-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:z.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ".concat(h>=e.number?"bg-primary border-primary text-primary-foreground":"border-border text-muted-foreground"),children:h>e.number?(0,a.jsx)(x.A,{className:"h-5 w-5"}):(0,a.jsx)("span",{children:e.number})}),r<z.length-1&&(0,a.jsx)("div",{className:"flex-1 h-0.5 mx-2 transition-colors ".concat(h>e.number?"bg-primary":"bg-border")})]},e.number))}),(0,a.jsx)("div",{className:"flex justify-between text-sm",children:z.map(e=>(0,a.jsx)("div",{className:"flex-1 text-center ".concat(h>=e.number?"text-foreground":"text-muted-foreground"),children:t(e.titleKey)},e.number))})]}),(0,a.jsxs)(n.Zp,{className:"p-6 sm:p-8 mb-6",children:[1===h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl mb-6",children:t("booking.selectService")}),(0,a.jsx)("div",{className:"grid sm:grid-cols-2 gap-4",children:F.map(e=>(0,a.jsxs)("button",{onClick:()=>A({...T,service:e.id}),className:"p-6 rounded-lg border-2 text-left transition-all hover:border-primary/50 ".concat(T.service===e.id?"border-primary bg-primary/5":"border-border"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-lg",children:t(e.nameKey)}),(0,a.jsx)("span",{className:"text-primary text-lg",children:e.price})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.duration})]},e.id))})]}),2===h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl mb-6",children:t("booking.selectDateTime")}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg mb-4",children:t("booking.dateLabel")}),(0,a.jsx)(u,{mode:"single",selected:T.date,onSelect:K,disabled:e=>e<new Date||0===e.getDay(),className:"rounded-md border"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg",children:t("booking.timeLabel")}),T.date&&(0,a.jsxs)("button",{onClick:async()=>{let e=T.date?f(T.date):void 0,r=await fetch("/api/bookings/availability?date=".concat(e));r.ok&&S((await r.json()).bookedTimes||[])},className:"flex items-center gap-1 text-xs px-2 py-1 rounded bg-slate-100 hover:bg-slate-200 transition",title:"Refresh available times",children:[(0,a.jsx)(b.A,{className:"h-3 w-3"}),"Refresh"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2 max-h-96 overflow-y-auto",children:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"].map(e=>{let r=w.includes(e);return(0,a.jsx)("button",{onClick:()=>!r&&void(!w.includes(e)&&(N(null),A({...T,time:e}))),disabled:r||j,className:"py-3 px-4 rounded-lg border-2 transition-all ".concat(r?"border-red-200 bg-red-50 text-red-400 cursor-not-allowed opacity-50":T.time===e?"border-primary bg-primary/5":"border-border hover:border-primary/50"," ").concat(j?"cursor-not-allowed":""),children:e},e)})})]})]})]}),3===h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl mb-6",children:t("booking.contactDetails")}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.J,{htmlFor:"name",children:[t("booking.name")," *"]}),(0,a.jsx)(o.p,{id:"name",value:T.name,onChange:e=>A({...T,name:e.target.value}),placeholder:t("booking.namePlaceholder"),className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.J,{htmlFor:"email",children:[t("booking.email")," *"]}),(0,a.jsx)(o.p,{id:"email",type:"email",value:T.email,onChange:e=>A({...T,email:e.target.value}),placeholder:t("booking.emailPlaceholder"),className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.J,{htmlFor:"phone",children:[t("booking.phone")," *"]}),(0,a.jsx)(o.p,{id:"phone",type:"tel",value:T.phone,onChange:e=>A({...T,phone:e.target.value}),placeholder:t("booking.phonePlaceholder"),className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.J,{htmlFor:"notes",children:t("booking.notes")}),(0,a.jsx)("textarea",{id:"notes",value:T.notes,onChange:e=>A({...T,notes:e.target.value}),placeholder:t("booking.notesPlaceholder"),className:"mt-2 w-full p-3 border rounded-lg border-border bg-background focus:outline-none focus:border-primary",rows:4})]})]})]}),4===h&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-primary"})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl mb-4",children:t("booking.booked")}),(0,a.jsxs)("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:[t("booking.confirmationMessage")," ",(0,a.jsx)("span",{className:"text-foreground",children:T.email})]}),(0,a.jsxs)(n.Zp,{className:"p-6 bg-card/50 text-left max-w-md mx-auto mb-8",children:[(0,a.jsx)("h3",{className:"text-lg mb-4",children:t("booking.details")}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[t("booking.service"),":"]}),(0,a.jsx)("span",{children:t((null==(e=F.find(e=>e.id===T.service))?void 0:e.nameKey)||"services.haircut")})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[t("booking.date"),":"]}),(0,a.jsx)("span",{children:null==(r=T.date)?void 0:r.toLocaleDateString("en-US")})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[t("booking.time"),":"]}),(0,a.jsx)("span",{children:T.time})]})]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t("booking.cancelMessage")})]})]}),k&&(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 text-red-700 px-4 py-3 rounded-lg mb-4",children:[(0,a.jsx)("p",{className:"font-medium",children:t("booking.error")||"Error"}),(0,a.jsx)("p",{className:"text-sm",children:k})]}),h<4&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(s.$,{variant:"outline",onClick:()=>{h>1&&(p(h-1),N(null))},disabled:1===h||j,className:"gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),t("booking.back")]}),h<3?(0,a.jsxs)(s.$,{onClick:()=>1!==h||T.service?2!==h||T.date&&T.time?3!==h||T.name&&T.email&&T.phone?void(N(null),h<4&&p(h+1)):void N(t("booking.fillDetailsError")):void N(t("booking.selectDateTimeError")):void N(t("booking.selectServiceError")),disabled:!P()||j,className:"gap-2",children:[t("booking.next"),(0,a.jsx)(c.A,{className:"h-4 w-4"})]}):(0,a.jsx)(s.$,{onClick:E,disabled:!P()||j,className:"gap-2",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"animate-spin",children:"⏳"}),t("booking.submitting")||"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[t("booking.confirm"),(0,a.jsx)(x.A,{className:"h-4 w-4"})]})})]})]})]}),(0,a.jsx)(v,{})]})}},65142:(e,r,t)=>{t.d(r,{p:()=>s});var a=t(95155);t(12115);var i=t(1197);function s(e){let{className:r,type:t,...s}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...s})}},76444:(e,r,t)=>{t.d(r,{J:()=>n});var a=t(95155);t(12115);var i=t(46554),s=t(1197);function n(e){let{className:r,...t}=e;return(0,a.jsx)(i.b,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},86948:(e,r,t)=>{t.d(r,{Zp:()=>s});var a=t(95155);t(12115);var i=t(1197);function s(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...t})}},89379:(e,r,t)=>{t.d(r,{A:()=>d});var a=t(95155),i=t(65229),s=t(9540),n=t(12115),o=t(3998),l=t(88557);function d(e){let{currentPage:r,onNavigate:t}=e,[d,c]=(0,n.useState)(!1),{language:m,setLanguage:u,t:x}=(0,l.s)(),b=[{name:x("nav.home"),value:"home"},{name:x("nav.services"),value:"services"},{name:x("nav.booking"),value:"booking"},{name:x("nav.contact"),value:"contact"}];return(0,a.jsx)("nav",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("button",{onClick:()=>t("home"),className:"text-xl tracking-wider text-primary hover:text-primary/80 transition-colors font-bold",children:"AXA BARBERSHOP"}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[b.map(e=>(0,a.jsx)("button",{onClick:()=>{console.log("Navigating to:",e.value),t(e.value)},className:"transition-colors ".concat(r===e.value?"text-primary":"text-foreground/70 hover:text-foreground"),children:e.name},e.value)),(0,a.jsx)(o.$,{onClick:()=>t("booking"),size:"sm",children:x("nav.booking")}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4 border-l border-border pl-4",children:[(0,a.jsx)("button",{onClick:()=>u("fi"),className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat("fi"===m?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground"),children:"FI"}),(0,a.jsx)("button",{onClick:()=>u("en"),className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat("en"===m?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground"),children:"EN"})]})]}),(0,a.jsx)("button",{className:"md:hidden p-2",onClick:()=>c(!d),children:d?(0,a.jsx)(i.A,{className:"h-6 w-6"}):(0,a.jsx)(s.A,{className:"h-6 w-6"})})]}),d&&(0,a.jsx)("div",{className:"md:hidden py-4 border-t border-border",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[b.map(e=>(0,a.jsx)("button",{onClick:()=>{t(e.value),c(!1)},className:"text-left py-2 transition-colors ".concat(r===e.value?"text-primary":"text-foreground/70"),children:e.name},e.value)),(0,a.jsx)(o.$,{onClick:()=>{t("booking"),c(!1)},className:"w-full",children:x("nav.booking")}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-border",children:[(0,a.jsx)("button",{onClick:()=>{u("fi"),c(!1)},className:"flex-1 px-3 py-2 rounded font-medium transition-colors ".concat("fi"===m?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground"),children:"Suomi"}),(0,a.jsx)("button",{onClick:()=>{u("en"),c(!1)},className:"flex-1 px-3 py-2 rounded font-medium transition-colors ".concat("en"===m?"bg-primary text-primary-foreground":"text-foreground/70 hover:text-foreground"),children:"English"})]})]})})]})})}}}]);