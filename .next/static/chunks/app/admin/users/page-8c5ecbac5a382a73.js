(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{1197:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2821),a=r(75889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var s=r(95155);r(12115);var a=r(46673),i=r(83101),n=r(1197);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:i,asChild:o=!1,...d}=e,c=o?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:r,size:i,className:t})),...d})}},33842:(e,t,r)=>{Promise.resolve().then(r.bind(r,42665))},42665:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(95155),a=r(12115),i=r(85271),n=r(20063),l=r(3998),o=r(65142),d=r(86948),c=r(18720);let u=(0,r(71847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=r(71360);function m(){let{user:e,session:t,loading:r}=(0,i.A)(),m=(0,n.useRouter)(),[x,g]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[v,b]=(0,a.useState)([]),[y,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!0);(0,a.useEffect)(()=>{r||e||m.push("/admin/login")},[e,r,m]),(0,a.useEffect)(()=>{e&&k()},[e]);let k=async()=>{try{let e=await fetch("/api/admin/users",{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}});if(!e.ok)throw Error("Failed to fetch users");let r=await e.json();b(r)}catch(e){c.o.error(e.message||"Failed to fetch users")}finally{N(!1)}},A=async e=>{e.preventDefault(),w(!0);try{let e=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==t?void 0:t.access_token)},body:JSON.stringify({email:x,password:f})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to create user")}c.o.success("Admin user created successfully!"),g(""),p(""),await k()}catch(e){c.o.error(e.message||"Error creating user")}finally{w(!1)}},C=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let r=await fetch("/api/admin/users/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to delete user")}c.o.success("User deleted successfully!"),await k()}catch(e){c.o.error(e.message||"Error deleting user")}};return r?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{children:"Loading..."})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Admin User Management"}),(0,s.jsx)("p",{className:"text-slate-400",children:"Manage admin accounts for AXA Barbershop"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)(d.Zp,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Admin"}),(0,s.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email"}),(0,s.jsx)(o.p,{type:"email",placeholder:"newadmin@example.com",value:x,onChange:e=>g(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Temporary Password"}),(0,s.jsx)(o.p,{type:"password",placeholder:"Temporary password",value:f,onChange:e=>p(e.target.value),required:!0})]}),(0,s.jsx)(l.$,{type:"submit",disabled:y,className:"w-full bg-blue-600 hover:bg-blue-700",children:y?"Creating...":"Create Admin User"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mt-4",children:"Note: The user can change their password after first login"})]}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(d.Zp,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Current Admins"}),j?(0,s.jsx)("p",{className:"text-slate-400",children:"Loading users..."}):0===v.length?(0,s.jsx)("p",{className:"text-slate-400",children:"No admin users yet"}):(0,s.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(u,{className:"h-4 w-4"}),e.email]}),(0,s.jsxs)("p",{className:"text-sm text-slate-400",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,s.jsx)("button",{onClick:()=>C(e.id),className:"p-2 hover:bg-red-600/20 rounded text-red-400 hover:text-red-300 transition",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]},e.id))})]})})]})]})})}},65142:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(95155);r(12115);var a=r(1197);function i(e){let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},71360:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:o?24*Number(l)/Number(a):l,className:i("lucide",d),...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:o,...d}=r;return(0,s.createElement)(l,{ref:n,iconNode:t,className:i("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=a(e),r}},85271:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l,A:()=>o});var s=r(95155),a=r(12115);let i=(0,r(92373).UU)("https://pqgbtrphaazzltuetclv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBxZ2J0cnBoYWF6emx0dWV0Y2x2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0NDIyMTIsImV4cCI6MjA4NDAxODIxMn0.ng7cwu95CvvdRaZiW9V4lNvjasLH11RW8uaAR7hmtw4"),n=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await i.auth.getSession();d(e),l((null==e?void 0:e.user)||null)}catch(e){console.error("Error fetching session:",e)}finally{u(!1)}})();let{data:{subscription:e}}=i.auth.onAuthStateChange((e,t)=>{d(t),l((null==t?void 0:t.user)||null)});return()=>null==e?void 0:e.unsubscribe()},[]);let h=async(e,t)=>{let{data:r,error:s}=await i.auth.signUp({email:e,password:t});if(s)throw s;return r},m=async(e,t)=>{let{data:r,error:s}=await i.auth.signInWithPassword({email:e,password:t});if(s)throw s;return r},x=async()=>{let{error:e}=await i.auth.signOut();if(e)throw e};return(0,s.jsx)(n.Provider,{value:{user:r,session:o,loading:c,signUp:h,signIn:m,signOut:x},children:t})}function o(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within AuthProvider");return e}},86948:(e,t,r)=>{"use strict";r.d(t,{Zp:()=>i});var s=r(95155);r(12115);var a=r(1197);function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...r})}}},e=>{e.O(0,[938,764,441,255,358],()=>e(e.s=33842)),_N_E=e.O()}]);